<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="utf-8">
    <title>公交换乘</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/css/jquery.mobile.theme-1.3.1.min.css"/>
    <link rel="stylesheet" href="/css/jquery.mobile-1.3.1.min.css" />
    <link rel="stylesheet" href="/css/bus_style.css" type="text/css" />
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    
    <style type="text/css">
 
   #l-map{height:98%;width:98%;float:left;border-right:1px solid #bcbcbc;}
    #r-result{height:100px;width:100px;margin:0;}
    #content_div{
        position: absolute;
        width: 100%;
        height: 350px;
        height: calc(100% - 40px);
        height: -moz-calc(100% - 90px);
        height: -ms-calc(100% - 12px);
        height: -o-calc(100% - 12px);
        height: -webkit-calc(100% - 12px);
        padding-top:5px;
        padding-right:5px;
        padding-left:5px;
    }

   
    </style>

    <script src="/js/jquery-1.10.1.min.js"></script>
    <script src="/js/jquery.mobile-1.3.1.min.js"></script>

     <!-- <script src="js/mass_min.js"></script> -->
    <script src="/js/mass_merge.js"></script>
    <!-- MVVM框架,用于后续的list -->
    <script src="/js/avalon_min.js"></script>
    <script type="text/javascript" src="http://api.map.baidu.com/api?v=1.5&amp;ak=43cfe61da7519c898a6951da09870b36"></script>
    <script src="/js/convertor.js"></script>      <!-- 用于GPS转百度坐标-->
    <script src="/js/position_cmp.js"></script>
    <script src="/js/AreaRestriction.js"></script> <!--用于区域限制 -->
</head>
<div data-role="page" id="bus_sta" data-title="换乘查询" data-dom-cache="false">
	<div data-role="header" data-position="fixed">
		<a href="/index.html" data-role="button" data-icon="back" data-iconpos="left" data-inline="true" data-theme="b" data-transition="slidefade">返回</a>
		<h1>换乘查询</h1>
		
	</div>

	<div data-role="content">

		<div class="bus_form">
			<div>
					<input type="text" name="bus_start_point" id="bus_start_point" placeholder="请输入起点" ms-model="s_point" >
					<input type="text" name="bus_end_point" id="bus_end_point" placeholder="请输入终点" ms-model="e_point">
					<a href="#" id="refresh_point" data-role="button" data-icon="refresh" data-iconpos="right" data-mini="true" data-theme="e" >切换</a>
					<a id="search_btn" href="bus_line.html" data-role="button" data-inline="true" data-transition="slidefade" style="display:none;">查询</a>
					<input type="button" value="查询"  data-theme="b" id="bus_commit">
			</div>
		</div>

	</div>


	<div data-role="footer" data-position="fixed">
		<h4>Page Footer</h4>
	</div>

	<script type="text/javascript">
		var start_p = new BMap.Autocomplete({    //建立一个自动完成的对象
			"input" : "bus_start_point",
			"location": "成都"
		});
		
		var end_p = new BMap.Autocomplete({   //建立一个自动完成的对象
			"input" : "bus_end_point",
			"location": "成都"
		});
		$(document).ready(function($) {
			$("#refresh_point").click(function(){
				var tmp = $('#bus_start_point').val();
				$('#bus_start_point').val($('#bus_end_point').val());
				$('#bus_end_point').val(tmp);
				start_p.hide();
				end_p.hide();
			});
			$("#bus_commit").click(function(){
				var bgn_point = $('#bus_start_point').val();
				var end_point =  $('#bus_end_point').val();
				if( bgn_point &&  end_point){
					window.ride_param = [];
					window.ride_param.bgn_point= bgn_point;
					window.ride_param.end_point= end_point;
					$('#search_btn').attr("href","ride_result.html");
					$('#search_btn').trigger('click');
				}
				
			});
		});
		
		
	</script>
</div>